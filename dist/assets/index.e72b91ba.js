import{c as e,m as t,C as a,R as n,F as r,d as l,a as o,b as c,e as s,f as i,S as m,g as u,h as d,i as p,T as f,j as g,k as h,I as E,l as b,n as y,o as x,A as w,p as v,q as C,r as k,s as N,M as I,t as S,u as B,v as T,B as z,w as O,x as R,y as j,z as D,D as M,E as W,G as J,H as L,J as U,K as F,L as A,N as G,O as P,P as Y,Q as K,U as _,V as q,W as Q,X as V,Y as X,Z as H,_ as Z,$,a0 as ee,a1 as te,a2 as ae}from"./vendor.5ffc3f7a.js";const ne=e("https://ieakryxxhrwohvnehuba.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzMTI2NjU5NCwiZXhwIjoxOTQ2ODQyNTk0fQ.KsLJFHB3NKduYnAY8lVjuBojq56l8JsV-AMZNPxa8Gs");function re(e,t){var a;(a=null==localStorage.getItem("buckets")?{}:JSON.parse(localStorage.getItem("buckets")))[e]=t,localStorage.setItem("buckets",JSON.stringify(a))}function le(e){var t=JSON.parse(localStorage.getItem("buckets"));delete t[e],localStorage.setItem("buckets",JSON.stringify(t))}async function oe(e){const t=ne.auth.user().id+"/"+e,{data:a,error:n}=await ne.storage.from("files").download(t);!function(e,t="file"){const a=URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=t,document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),document.body.removeChild(n)}(a,e)}async function ce(e,t){const{user:a,session:n,error:r}=await ne.auth.signIn({email:e+"@fare.com",password:t});if(r)return r;window.location.assign("/")}function se(){return ne.auth.user().email.split("@")[0].toUpperCase()}async function ie(){le(se()),window.location.assign("/auth"),await ne.auth.signOut()}function me(){const e=ue(),[t,i]=a.exports.useState(1);return n.createElement("div",{className:e.root},n.createElement("input",{className:e.fileInput,id:"uploadInput",multiple:!0,type:"file",onChange:async function(e){i(2);const t=await async function(e){const t=e.target.files;for(var a,n=0;n<t.length;n++){const e=ne.auth.user().id+"/"+t[n].name.replace(/\s/g,"-");a=await ne.storage.from("files").upload(e,{cacheControl:"0",upsert:!0})}return document.getElementById("uploadInput").value=null,a}(e);t.data?(i(3),await setTimeout((()=>{i(1)}),1e3)):t.error&&(i(4),await setTimeout((()=>{i(1)}),2e3))}}),n.createElement("label",{htmlFor:"uploadInput"},n.createElement(r,{color:"primary",className:e.fab,"aria-label":"add",component:"span"},1==t&&n.createElement(l,null),2==t&&n.createElement(o,{color:"secondary"}),3==t&&n.createElement(c,{color:"secondary"}),4==t&&n.createElement(s,{color:"secondary"}))))}const ue=t((e=>({fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2),zIndex:"10"},fileInput:{display:"none"}})));function de(e){const t=pe(),a=e.data;return n.createElement(i,{className:t.files},n.createElement(m,{container:!0,spacing:2},a.map((e=>{const r=e.name,l=r.split(".")[r.split(".").length-1],o={fontWeight:600,fontSize:15,backgroundColor:fe(l)};return n.createElement(m,{item:!0,key:a.indexOf(e),xs:12,sm:6,md:4,lg:3},n.createElement(u,{id:"file-card",className:t.fileCard,variant:"outlined"},n.createElement(d,{id:"card-title",onClick:()=>oe(e.name),className:t.textFileCard},n.createElement(p,null,n.createElement(f,{variant:"h6",component:"h6"},e.name.split(".")[0].replace(/\-/g," ")))),n.createElement(g,{className:t.buttonCardAction},n.createElement(h,{color:"primary",style:o,label:l.toUpperCase(),className:t.chip}),n.createElement(E,{className:t.smallButton,size:"small",onClick:()=>oe(e.name)},n.createElement(b,{color:"secondary"})),n.createElement(E,{className:t.smallButton,size:"small",onClick:()=>async function(e){const t=ne.auth.user().id+"/"+e;await ne.storage.from("files").remove([t])}(e.name)},n.createElement(y,{color:"secondary"})))))}))))}const pe=t((e=>({files:{marginTop:"150px",marginBottom:"20px",fullWidth:!0,flexGrow:1,display:"flex"},buttonCardAction:{display:"flex"},smallButton:{padding:"0px"},chip:{flexGrow:1,overflow:"hidden",textTransform:"capitalize","&:.MuiChip-label":{fontSize:"1em",textDecoration:"bold"}},fileCard:{textAlign:"center",height:"200px",display:"flex",flexDirection:"column",justifyContent:"flex-end",flexWrap:"wrap",borderRadius:"0.5em"},textFileCard:{backgroundColor:"#eeeeee",textTransform:"capitalize",flexGrow:1,overflowX:"hidden",overflowY:"hidden",height:"140px"}})));var fe=function(e){return{}[e]};function ge(e){const t=he(),[r,l]=a.exports.useState(""),o=se(),[c,s]=n.useState(null);return n.createElement(w,{id:"navbar",position:"fixed"},n.createElement(v,null,n.createElement(f,{id:"title",className:t.title,variant:"h6",noWrap:!0},"Fare | ",n.createElement("b",null,o)),n.createElement("div",{className:t.search},n.createElement("div",{className:t.searchIcon},n.createElement(C,null)),n.createElement(k,{placeholder:"Searchâ€¦",classes:{root:t.inputRoot,input:t.inputInput},value:r,onChange:function(t){e.dataBridge({search:t.currentTarget.value}),l(t.currentTarget.value)},inputProps:{"aria-label":"search"}})),n.createElement(E,{onClick:e=>{s(e.currentTarget)},color:"inherit",edge:"end"},n.createElement(N,{fontSize:"large"})),n.createElement(I,{id:"menu-appbar",anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(c),onClose:()=>{s(null)}},n.createElement(S,{color:"secondary"},n.createElement(N,{color:"secondary",className:t.menuIcon}),n.createElement("b",null,o)),n.createElement(S,{onClick:function(){window.location.assign("/auth")}},n.createElement(B,{color:"secondary",className:t.menuIcon})," Switch Bucket"),n.createElement(S,{onClick:ie},n.createElement(T,{color:"secondary",className:t.menuIcon}),"Logout"))))}const he=t((e=>({title:{flexGrow:1,display:"none",[e.breakpoints.up("sm")]:{display:"block"},fontFamily:"Montserrat",fontWeigth:600,fontSize:30},menuIcon:{paddingRight:"1ch"},search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:x(e.palette.common.white,.15),"&:hover":{backgroundColor:x(e.palette.common.white,.25)},marginLeft:0,width:"100%",[e.breakpoints.up("sm")]:{marginLeft:e.spacing(1),width:"auto"}},searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:`calc(1em + ${e.spacing(4)}px)`,transition:e.transitions.create("width"),width:"100%",[e.breakpoints.up("sm")]:{width:"30ch","&:focus":{width:"40ch"}}},select:{backgroundColor:x(e.palette.common.white,.15),"&:hover":{backgroundColor:x(e.palette.common.white,.25)},"&:after":{borderColor:"#ffffff",color:"#ffffff",borderRadius:e.shape.borderRadius},"& .MuiSvgIcon-root":{display:"none",margin:0,padding:0,width:0},color:"#ffffff",borderColor:"#ffffff",margin:e.spacing(1)},selectEmpty:{marginTop:e.spacing(2)},menuButton:{marginRight:e.spacing(2)}})));function Ee(e){const t=be(),[r,l]=a.exports.useState(1);function o(e){return r==e?"contained":"outlined"}function c(t){e.dataBridge({sort:t.currentTarget.value}),l(t.currentTarget.value)}return n.createElement("div",{className:t.root},n.createElement(w,{id:"sortbar",position:"fixed",className:t.appBar},n.createElement(v,null,n.createElement(z,{variant:"outlined",color:"secondary",disableElevation:!0},n.createElement(O,{className:t.button,variant:o(1),value:1,onClick:c},n.createElement(R,null),n.createElement(j,null)),n.createElement(O,{className:t.button,variant:o(2),value:2,onClick:c},n.createElement(R,null),n.createElement(D,null)),n.createElement(O,{className:t.button,variant:o(3),value:3,onClick:c},n.createElement(M,null),n.createElement(j,null)),n.createElement(O,{className:t.button,variant:o(4),value:4,onClick:c},n.createElement(W,null),n.createElement(D,null))))))}const be=t((e=>({button:{padding:"5px",paddingLeft:"10px",paddingRight:"10px"},appBar:{backgroundColor:"#ffffff",display:"flex",flexDirection:"column",alignItems:"center",top:"64px",[e.breakpoints.down("md")]:{top:"59px"}},title:{flexGrow:1}})));function ye(){const e=xe();return n.createElement(J,{className:e.root},n.createElement(f,{className:e.text,color:"primary"},n.createElement("span",{className:e.part1},"Created by")," Badr Bnider"))}const xe=t((e=>({text:{textAlign:"center"},part1:{color:"#fff"},root:{marginTop:"10px",backgroundColor:"#424242",paddingTop:"15px",paddingBottom:"15px",position:"relative",bottom:0,JustifySelf:"flex-end"}})));class we extends n.Component{constructor(e){super(e),this.state={files:[],search:"",sort:1},this.dataBridge=this.dataBridge.bind(this)}componentDidMount(){this.refresh=setInterval((()=>{(async function(){const e=ne.auth.user().id;var{data:t,error:a}=await ne.storage.from("files").list(e);return t})().then((e=>{this.setState(Object.assign({},this.state,{files:e.filter((e=>{return t=e.name,a=this.state.search,-1!=t.toLowerCase().replace(/-/," ").indexOf(a.toLowerCase())||0==a.length;var t,a})).sort(((e,t)=>function(e,t,a){var n=e.name.toLowerCase().split(".")[0],r=t.name.toLowerCase().split(".")[0];switch(a){case"1":return n.localeCompare(r);case"2":return r.localeCompare(n);case"3":return new Date(e.updated_at)-new Date(t.updated_at);case"4":return new Date(t.updated_at)-new Date(e.updated_at)}}(e,t,this.state.sort)))}))}))}),500)}componentWillUnmount(){clearInterval(this.refresh)}dataBridge(e){this.setState(Object.assign({},this.state,e))}render(){return null==ne.auth.user()?(window.location.assign("/auth"),n.createElement("div",null)):n.createElement("main",{style:{display:"flex",flexDirection:"column",height:"100vh",justifyContent:"flex-start"}},n.createElement(ge,{dataBridge:this.dataBridge}),n.createElement(Ee,{dataBridge:this.dataBridge}),n.createElement(de,{data:this.state.files}),n.createElement(me,null),n.createElement(ye,null))}}function ve(){const e=Ce(),[t,r]=a.exports.useState(""),[l,o]=a.exports.useState(""),[c,s]=a.exports.useState(""),[i,d]=a.exports.useState(!0);return n.createElement(u,{id:"signin-card",className:e.card},n.createElement(m,{container:!0,spacing:2,className:e.grid},n.createElement(m,{item:!0,xs:12},n.createElement(f,{className:e.title,color:"primary"},n.createElement("b",null,"Fare |"),n.createElement("span",{className:e.titlePart1}," Authentication"))),n.createElement(m,{item:!0,xs:12},n.createElement(L,{id:"bucket-name",onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),document.getElementById("password").focus())},label:"Bucket Name",variant:"filled",size:"small",value:t,onChange:e=>{r(e.target.value),s("")},className:"signin-input",fullWidth:!0,required:!0,autoFocus:!0})),n.createElement(m,{item:!0,xs:12},n.createElement(L,{id:"password",onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),document.getElementById("signin").click())},value:l,label:"Password",variant:"filled",size:"small",className:"signin-input",onChange:e=>{o(e.target.value),s("")},type:"password",fullWidth:!0,required:!0})),n.createElement(m,{item:!0,xs:12},n.createElement(U,{className:e.switch,control:n.createElement(F,{checked:i,color:"primary",onChange:function(e){d(e.target.checked)}}),label:"Save Bucket"})),n.createElement(m,{item:!0,xs:12},n.createElement(ke,{error:c})),n.createElement(m,{item:!0,xs:6},n.createElement(O,{id:"signup",className:"signin-input",variant:"outlined",color:"primary",onClick:async function(){const e=await async function(e,t){const{user:a,session:n,error:r}=await ne.auth.signUp({email:e+"@fare.com",password:t});if(r)return r;window.location.assign("/")}(t,l);e?s(e):i&&re(t,l)},fullWidth:!0},n.createElement("b",null,"Sign Up"))),n.createElement(m,{item:!0,xs:6},n.createElement(O,{id:"signin",className:"signin-input",variant:"contained",color:"primary",onClick:async function(){const e=await ce(t,l);e?s(e):i&&re(t,l)},fullWidth:!0},n.createElement("b",null,"Sign In")))))}const Ce=t({title:{fontSize:"2.5em",textAlign:"center",margin:5,fontFamily:"Montserrat"},card:{padding:"2ch"},switch:{color:"#424242"},titlePart1:{color:"#424242"}});function ke(e){return e.error&&n.createElement(A,{style:{margin:"8px"},severity:"error"},e.error.message)}const Ne=()=>null==localStorage.getItem("buckets")?[]:Object.entries(JSON.parse(localStorage.getItem("buckets")));function Ie(){const e=Se(),[t,r]=a.exports.useState(null),[l,o]=a.exports.useState(Ne),c=e=>{r(e.currentTarget)},s=()=>{r(null)};return n.createElement("div",null,n.createElement(u,{id:"buckets-card",className:e.card},n.createElement(G,null,l.map((a=>n.createElement(P,{key:a[0]},n.createElement(Y,null,n.createElement(K,{color:"secondary"})),n.createElement(f,{color:"secondary",className:e.listItemText},n.createElement("b",null,a[0].toUpperCase())),n.createElement(E,{variant:"contained",onClick:function(){ce(a[0],a[1])},className:e.auth},n.createElement(_,{size:"medium",color:"primary"})),n.createElement(q,{className:e.more},n.createElement(E,{onClick:c},n.createElement(Q,null)),n.createElement(I,{anchorEl:t,keepMounted:!0,open:Boolean(t),onClose:s},n.createElement(S,{onClick:e=>function(e,t){le(t),o(Ne()),s()}(0,a[0])},n.createElement(y,{color:"secondary",style:{marginRight:"10px"}}),"Delete")))))),function(){if(null==localStorage.getItem("buckets")||"{}"==localStorage.getItem("buckets"))return!0;return!1}()&&n.createElement(P,{key:0},n.createElement(f,{color:"secondary",className:e.noneItem},n.createElement("b",null,"There is no saved buckets"))))))}const Se=t((e=>({card:{padding:"2ch",paddingTop:"1ch",paddingBottom:"1ch"},auth:{marginRight:"40px"},listItemText:{fontSize:"1.2em",width:"100%"},noneItem:{fontSize:"1.2em",textAlign:"center",width:"100%"}})));function Be(){const e=Te();return n.createElement("div",{id:"background",className:e.root},n.createElement(J,{className:e.box},n.createElement(ve,null),n.createElement(Ie,null),n.createElement(f,{color:"secondary",className:e.footer},"Created by ",n.createElement("b",null,n.createElement(V,{href:"https://badrbnider.tk"},"Badr Bnider")))))}const Te=t({box:{gap:"1ch",maxWidth:"700px"},footer:{textAlign:"center"},root:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundSize:"cover",minHeight:"100vh",width:"100vw"}}),ze=X({palette:{primary:{main:"#F65137"},secondary:{main:ae[800]}},typography:{fontFamily:"Montserrat",fontWeight:800}});H.render(n.createElement(n.StrictMode,null,n.createElement(Z,{theme:ze},n.createElement($,null,n.createElement(ee,null,n.createElement(te,{path:"/auth"},n.createElement(Be,null)),n.createElement(te,{path:"/"},n.createElement(we,null)))))),document.getElementById("root"));
